:root{--kingdom-red: #c41e3a;--kingdom-blue: #1e3ac4;--kingdom-green: #1ec43a;--kingdom-yellow: #c4b01e;--kingdom-red-dark: #8a1529;--kingdom-blue-dark: #15298a;--kingdom-green-dark: #158a29;--kingdom-yellow-dark: #8a7b15;--ui-background: rgba(30, 20, 10, .9);--ui-border: #8b7355;--ui-text: #f4e4c1;--ui-text-muted: #b8a890;--touch-target-min: 44px;--loading-bg: rgba(0, 0, 0, .8)}*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}html,body{width:100%;height:100%;min-height:100vh;min-width:100vw;overflow:hidden;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}body{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#1a1a1a;color:var(--ui-text)}#game-container{position:relative;width:100vw;height:100vh;overflow:hidden;touch-action:none}#gameCanvas{display:block;width:100%;height:100%;min-width:320px;min-height:320px;touch-action:none;outline:none;-webkit-tap-highlight-color:transparent}#ui-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;touch-action:none;z-index:10}#ui-layer>*{pointer-events:auto}.loading-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:var(--loading-bg);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:100;transition:opacity .5s ease-out,visibility .5s ease-out}.loading-overlay.hidden{opacity:0;visibility:hidden;pointer-events:none}.loading-spinner{width:60px;height:60px;border:4px solid rgba(244,228,193,.2);border-top-color:var(--ui-text);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.loading-text{margin-top:20px;font-size:18px;color:var(--ui-text);text-transform:uppercase;letter-spacing:2px}.touch-target{min-width:var(--touch-target-min);min-height:var(--touch-target-min);display:flex;align-items:center;justify-content:center}@media (max-width: 768px){.loading-text{font-size:16px}.loading-spinner{width:50px;height:50px}}@media (max-width: 480px){.loading-text{font-size:14px;letter-spacing:1px}.loading-spinner{width:40px;height:40px;border-width:3px}}@media (orientation: landscape){#gameCanvas{min-height:100vh}}@media (orientation: portrait){#gameCanvas{min-width:100vw}}@media (-webkit-min-device-pixel-ratio: 2),(min-resolution: 192dpi){#gameCanvas{image-rendering:-webkit-optimize-contrast;image-rendering:crisp-edges}}@media (prefers-reduced-motion: reduce){.loading-spinner{animation:none}.loading-overlay{transition:none}}.admin-toggle{position:absolute;top:16px;left:16px;width:56px;height:56px;border:2px solid var(--ui-border);border-radius:8px;background:var(--ui-background);color:var(--ui-text);font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;pointer-events:auto;z-index:20;box-shadow:0 2px 8px #0006}.admin-toggle:hover{background:#3c2814f2;transform:scale(1.05)}.admin-toggle.active{background:var(--kingdom-yellow-dark);border-color:var(--kingdom-yellow)}.admin-toggle-icon{line-height:1}.admin-panel{position:absolute;top:0;left:0;width:380px;max-width:90vw;height:100%;background:var(--ui-background);border-right:3px solid var(--ui-border);display:flex;flex-direction:column;z-index:30;transition:transform .3s ease-out;box-shadow:4px 0 20px #00000080}.admin-panel.hidden{transform:translate(-100%)}.admin-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:2px solid var(--ui-border);background:#0000004d}.admin-header h2{font-size:20px;font-weight:600;color:var(--ui-text);text-transform:uppercase;letter-spacing:1px;margin:0}.admin-close{width:40px;height:40px;border:2px solid var(--ui-border);border-radius:6px;background:transparent;color:var(--ui-text);font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.admin-close:hover{background:#8b73554d;border-color:var(--ui-text)}.admin-settings-btn{width:40px;height:40px;border:2px solid var(--ui-border);border-radius:6px;background:transparent;color:var(--ui-text);font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;margin-right:10px}.admin-settings-btn:hover{background:#8b73554d;border-color:var(--ui-text);transform:rotate(30deg)}.settings-icon{display:inline-block}.admin-content{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:24px}.kingdom-selector h3{font-size:14px;font-weight:600;color:var(--ui-text-muted);text-transform:uppercase;letter-spacing:1px;margin:0 0 16px}.kingdom-cards{display:grid;grid-template-columns:1fr 1fr;gap:12px}.kingdom-card{background:#0000004d;border:2px solid var(--ui-border);border-radius:10px;padding:12px;cursor:pointer;transition:all .2s ease;display:flex;flex-direction:column;gap:8px;min-height:120px}.kingdom-card:hover{background:#3c281480;transform:translateY(-2px);box-shadow:0 4px 12px #0000004d}.kingdom-card.selected{border-width:3px;background:#3c2814b3;box-shadow:0 0 15px #f4e4c133}.kingdom-color{width:32px;height:32px;border-radius:50%;border:2px solid rgba(255,255,255,.3);box-shadow:0 2px 4px #0000004d}.kingdom-info{display:flex;flex-direction:column;gap:6px}.kingdom-name{font-size:14px;font-weight:600;color:var(--ui-text);margin:0}.kingdom-stats{display:flex;flex-direction:column;gap:4px}.stat{display:flex;align-items:center;gap:4px;font-size:12px;color:var(--ui-text-muted)}.stat-icon{font-size:14px}.stat-value{font-weight:600;color:var(--ui-text)}.kingdom-opportunities{display:flex;align-items:center;justify-content:space-between;padding-top:6px;border-top:1px solid rgba(139,115,85,.3);font-size:11px}.opp-label{color:var(--ui-text-muted)}.opp-value{font-weight:700;color:var(--kingdom-yellow);font-size:13px}.award-section{background:#0003;border:2px solid var(--ui-border);border-radius:10px;padding:16px}.award-section h3{font-size:14px;font-weight:600;color:var(--ui-text-muted);text-transform:uppercase;letter-spacing:1px;margin:0 0 16px}.selected-kingdom{margin-bottom:16px}.selected-kingdom .no-selection{text-align:center;color:var(--ui-text-muted);font-style:italic;padding:20px;background:#0003;border-radius:8px}.selected-info{display:flex;align-items:center;gap:12px;padding:12px;background:#0000004d;border-radius:8px;border:2px solid transparent}.selected-color{width:40px;height:40px;border-radius:50%;border:2px solid rgba(255,255,255,.3);flex-shrink:0}.selected-details h4{font-size:16px;font-weight:600;color:var(--ui-text);margin:0 0 4px}.selected-details p{font-size:13px;color:var(--ui-text-muted);margin:0}.selected-details strong{color:var(--kingdom-yellow)}.build-btn,.claim-btn,.castle-upgrade-btn{width:100%;margin-top:12px;padding:12px;border:2px solid var(--ui-border);border-radius:8px;background:#3c281499;color:var(--ui-text);font-size:14px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .2s ease}.build-btn:hover:not(.disabled),.claim-btn:hover:not(.disabled),.castle-upgrade-btn:hover:not(.disabled){background:#503c1ecc;border-color:var(--ui-text);transform:scale(1.02)}.build-btn.disabled,.claim-btn.disabled,.castle-upgrade-btn.disabled{opacity:.4;cursor:not-allowed}.build-icon,.claim-icon,.castle-icon{font-size:18px}.castle-upgrade-btn{background:#503c28b3;border-color:gold}.castle-info{font-size:12px;color:gold;margin-top:4px}.castle-maxed{color:#4caf50}.army-info{font-size:12px;color:#ff6b6b;margin-top:4px}.raise-army-btn{background:#502828b3;border-color:#ff6b6b}.action-buttons{display:flex;flex-direction:column;gap:8px}.award-buttons{display:flex;gap:10px;flex-wrap:wrap}.award-btn{flex:1;min-width:80px;min-height:60px;padding:10px;border:2px solid var(--ui-border);border-radius:8px;background:#3c281480;color:var(--ui-text);cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;transition:all .2s ease}.award-btn:hover{background:#503c1eb3;border-color:var(--ui-text);transform:scale(1.02)}.award-btn:active{transform:scale(.98)}.award-amount{font-size:20px;font-weight:700;color:var(--kingdom-yellow)}.award-label{font-size:11px;color:var(--ui-text-muted);text-transform:uppercase;letter-spacing:.5px}@media (max-width: 768px){.admin-panel{width:320px}.kingdom-cards{grid-template-columns:1fr}.kingdom-card{flex-direction:row;align-items:center;min-height:auto;padding:10px}.kingdom-info{flex:1}.kingdom-stats{flex-direction:row;gap:12px}.award-buttons{flex-direction:column}.award-btn{flex-direction:row;justify-content:space-between;padding:12px 16px}.award-amount{font-size:18px}}@media (max-width: 480px){.admin-toggle{width:48px;height:48px;top:12px;left:12px}.admin-panel{width:100%;max-width:none}.admin-content{padding:16px}.award-btn{min-height:56px}}@media (orientation: landscape) and (max-height: 600px){.admin-panel{width:340px}.kingdom-cards{grid-template-columns:1fr 1fr}.kingdom-card{min-height:100px;padding:10px}}.rtl{direction:rtl;text-align:right}.rtl .admin-panel{left:auto;right:0;border-right:none;border-left:3px solid var(--ui-border);transform:translate(0)}.rtl .admin-panel.hidden{transform:translate(100%)}.rtl .admin-toggle{left:auto;right:16px}.rtl .admin-header{flex-direction:row-reverse}.rtl .kingdom-card{text-align:right}.rtl .kingdom-stats{align-items:flex-start}.rtl .stat,.rtl .selected-info{flex-direction:row-reverse}.rtl .selected-details{text-align:right}.rtl .award-buttons{flex-direction:row-reverse}.language-toggle{position:absolute;top:16px;right:16px;width:56px;height:56px;border:2px solid var(--ui-border);border-radius:8px;background:var(--ui-background);color:var(--ui-text);font-size:14px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;pointer-events:auto;z-index:20;box-shadow:0 2px 8px #0006;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.language-toggle:hover{background:#3c2814f2;transform:scale(1.05)}.rtl .language-toggle{right:auto;left:16px}.language-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:100;opacity:1;visibility:visible;transition:opacity .3s ease,visibility .3s ease}.language-modal.hidden{opacity:0;visibility:hidden;pointer-events:none}.language-modal-content{background:var(--ui-background);border:3px solid var(--ui-border);border-radius:12px;padding:32px;min-width:300px;max-width:90vw;text-align:center;box-shadow:0 8px 32px #00000080}.language-modal h2{font-size:24px;color:var(--ui-text);margin-bottom:24px;text-transform:uppercase;letter-spacing:1px}.language-options{display:flex;flex-direction:column;gap:12px}.language-option{padding:16px 24px;border:2px solid var(--ui-border);border-radius:8px;background:#0000004d;color:var(--ui-text);font-size:18px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:12px}.language-option:hover{background:#3c2814b3;border-color:var(--ui-text);transform:translate(5px)}.rtl .language-option:hover{transform:translate(-5px)}.language-option.active{background:var(--kingdom-yellow-dark);border-color:var(--kingdom-yellow)}.language-option .lang-native{font-weight:600}.language-option .lang-name{font-size:14px;color:var(--ui-text-muted)}.language-modal-close{margin-top:20px;padding:12px 32px;border:2px solid var(--ui-border);border-radius:6px;background:transparent;color:var(--ui-text-muted);font-size:14px;cursor:pointer;transition:all .2s ease}.language-modal-close:hover{background:#8b73554d;color:var(--ui-text)}@media (max-width: 768px){.rtl .admin-panel{width:320px}.rtl .award-buttons{flex-direction:column-reverse}}@media (max-width: 480px){.rtl .admin-toggle{right:12px}.language-toggle{width:48px;height:48px;top:12px;right:12px}.rtl .language-toggle{right:auto;left:12px}}.text-ltr{direction:ltr;text-align:left;unicode-bidi:embed}.text-rtl{direction:rtl;text-align:right;unicode-bidi:embed}.number{direction:ltr;display:inline-block;unicode-bidi:plaintext}.building-menu-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;align-items:center;justify-content:center;z-index:50;opacity:1;visibility:visible;transition:opacity .3s ease,visibility .3s ease}.building-menu-overlay.hidden{opacity:0;visibility:hidden;pointer-events:none}.building-menu{background:var(--ui-background);border:3px solid var(--ui-border);border-radius:12px;width:90%;max-width:600px;max-height:80vh;display:flex;flex-direction:column;box-shadow:0 8px 32px #00000080}.building-menu-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:2px solid var(--ui-border);background:#0000004d}.building-menu-header h3{font-size:20px;font-weight:600;color:var(--ui-text);margin:0;text-transform:uppercase;letter-spacing:1px}.building-menu-close{width:36px;height:36px;border:2px solid var(--ui-border);border-radius:6px;background:transparent;color:var(--ui-text);font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.building-menu-close:hover{background:#8b73554d;border-color:var(--ui-text)}.building-menu-kingdom{padding:16px 20px;border-bottom:1px solid rgba(139,115,85,.3)}.menu-kingdom-info{display:flex;align-items:center;gap:12px;padding:12px;background:#0000004d;border-radius:8px;border:2px solid transparent}.menu-kingdom-color{width:32px;height:32px;border-radius:50%;border:2px solid rgba(255,255,255,.3);flex-shrink:0}.menu-kingdom-details h4{font-size:16px;font-weight:600;color:var(--ui-text);margin:0 0 4px}.menu-kingdom-details p{font-size:14px;color:var(--ui-text-muted);margin:0}.menu-kingdom-details strong{color:var(--kingdom-yellow)}.building-menu-content{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:24px}.building-category h4{font-size:14px;font-weight:600;color:var(--ui-text-muted);text-transform:uppercase;letter-spacing:1px;margin:0 0 12px;padding-bottom:8px;border-bottom:1px solid rgba(139,115,85,.3)}.building-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.building-btn{display:flex;flex-direction:column;align-items:center;padding:16px 8px;border:2px solid var(--ui-border);border-radius:10px;background:#0000004d;color:var(--ui-text);cursor:pointer;transition:all .2s ease;gap:6px}.building-btn:hover:not(.disabled){background:#3c281499;border-color:var(--ui-text);transform:translateY(-2px);box-shadow:0 4px 12px #0000004d}.building-btn:active:not(.disabled){transform:translateY(0)}.building-btn.disabled{opacity:.4;cursor:not-allowed;border-color:#8b73554d}.building-icon{font-size:32px;line-height:1}.building-name{font-size:13px;font-weight:600;text-align:center}.building-cost{display:flex;align-items:center;gap:4px;font-size:11px;color:var(--ui-text-muted)}.cost-value{color:var(--kingdom-yellow);font-weight:700}.rtl .building-menu-header,.rtl .menu-kingdom-info{flex-direction:row-reverse}.rtl .menu-kingdom-details{text-align:right}.rtl .building-grid{direction:rtl}.rtl .building-btn:hover:not(.disabled){transform:translateY(-2px)}@media (max-width: 768px){.building-menu{width:95%;max-height:85vh}.building-grid{grid-template-columns:repeat(2,1fr)}.building-btn{padding:12px 8px}.building-icon{font-size:28px}}@media (max-width: 480px){.building-menu{width:100%;height:100%;max-height:100vh;border-radius:0;border:none}.building-menu-header{padding:12px 16px}.building-menu-content{padding:16px}.building-grid{grid-template-columns:repeat(2,1fr);gap:10px}}.settings-modal{position:fixed;top:0;left:0;width:100%;height:100%;z-index:60;opacity:1;visibility:visible;transition:opacity .3s ease,visibility .3s ease}.settings-modal.hidden{opacity:0;visibility:hidden;pointer-events:none}.settings-modal-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:#000000d9;display:flex;align-items:center;justify-content:center;padding:20px}.settings-modal-content{background:var(--ui-background);border:3px solid var(--ui-border);border-radius:12px;width:100%;max-width:500px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 8px 32px #0009}.settings-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:2px solid var(--ui-border);background:#0000004d}.settings-title{font-size:22px;font-weight:600;color:var(--ui-text);margin:0;text-transform:uppercase;letter-spacing:1px}.settings-close{width:36px;height:36px;border:2px solid var(--ui-border);border-radius:6px;background:transparent;color:var(--ui-text);font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.settings-close:hover{background:#c41e3a4d;border-color:#c41e3a}.settings-body{flex:1;overflow-y:auto;padding:24px}.setting-item{background:#0003;border:2px solid var(--ui-border);border-radius:10px;padding:20px;margin-bottom:20px}.setting-item:last-child{margin-bottom:0}.setting-label{display:flex;align-items:center;gap:10px;margin-bottom:12px}.setting-icon{font-size:24px}.setting-name{font-size:16px;font-weight:600;color:var(--ui-text)}.setting-control{display:flex;align-items:center;gap:16px;margin-bottom:10px}.setting-slider{flex:1;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:8px;background:#8b73554d;border-radius:4px;outline:none;cursor:pointer}.setting-slider::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:24px;height:24px;background:var(--ui-border);border-radius:50%;cursor:pointer;transition:all .2s ease}.setting-slider::-webkit-slider-thumb:hover{background:var(--ui-text);transform:scale(1.1)}.setting-slider::-moz-range-thumb{width:24px;height:24px;background:var(--ui-border);border-radius:50%;cursor:pointer;border:none;transition:all .2s ease}.setting-slider::-moz-range-thumb:hover{background:var(--ui-text);transform:scale(1.1)}.setting-value{font-size:20px;font-weight:700;color:var(--ui-text);min-width:40px;text-align:center;background:#0000004d;padding:6px 12px;border-radius:6px;border:2px solid var(--ui-border)}.setting-description{font-size:13px;color:var(--ui-text-muted);line-height:1.5}.settings-footer{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-top:2px solid var(--ui-border);background:#0000004d;gap:12px}.settings-reset-btn{flex:1;padding:12px 20px;border:2px solid var(--ui-border);border-radius:8px;background:transparent;color:var(--ui-text);font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;text-transform:uppercase}.settings-reset-btn:hover{background:#8b73554d;border-color:var(--ui-text)}.settings-close-btn{flex:1;padding:12px 20px;border:2px solid var(--ui-border);border-radius:8px;background:var(--ui-border);color:#1a1a1a;font-size:14px;font-weight:700;cursor:pointer;transition:all .2s ease;text-transform:uppercase}.settings-close-btn:hover{background:var(--ui-text);border-color:var(--ui-text)}@media (max-width: 600px){.settings-modal-overlay{padding:10px}.settings-modal-content{max-height:95vh}.settings-header{padding:16px 20px}.settings-title{font-size:18px}.settings-body,.setting-item{padding:16px}.settings-footer{flex-direction:column;padding:16px 20px}.settings-reset-btn,.settings-close-btn{width:100%}}@media (max-width: 480px){.settings-modal-content{border-radius:0;max-height:100vh;height:100%}.settings-header{padding:12px 16px}.settings-body{padding:12px}}.game-notification{position:fixed;top:100px;left:50%;transform:translate(-50%) translateY(-100px);z-index:10000;opacity:0;transition:all .5s ease-out;pointer-events:none}.game-notification.show{transform:translate(-50%) translateY(0);opacity:1}.notification-content{padding:20px 40px;border-radius:12px;font-size:18px;font-weight:700;text-align:center;box-shadow:0 8px 32px #0006;border:3px solid}.game-notification.elimination .notification-content{background:linear-gradient(135deg,#2c1810,#1a0f0a);border-color:#c41e3a;color:#ff6b6b}.game-notification.victory .notification-content{background:linear-gradient(135deg,#1a2c10,#0f1a0a);border-color:gold;color:gold}.game-notification.info .notification-content{background:linear-gradient(135deg,#1a1a2e,#0f0f1a);border-color:#4a9eff;color:#4a9eff}.notification-message{text-shadow:0 2px 4px rgba(0,0,0,.5)}
